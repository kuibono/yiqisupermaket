@model YiQiWorkFlow.Domain.Pc.PcPutinManage
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>商品入库单编辑</title>
    <link type="text/css" rel="Stylesheet" href="/Styles/editPage.css" />
    <script type="text/javascript" src="/scripts/boot.js"></script>
    <script type="text/javascript" src="/Scripts/editPage.js"></script>
    <script type="text/javascript" src="/Scripts/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="~/Scripts/jquery.PrintArea.js"></script>
    <style type="text/css">
        .item {
            padding: 5px 10px;
            float: left;
        }

            .item:after {
                display: block;
                clear: both;
            }

        .label {
            float: left;
            text-align: right;
        }

        .text {
            float: left;
            text-align: left;
            border-bottom: solid 1px #AAA;
        }

        .clear {
            clear: both;
        }

        em.correct:after {
            display: inline-block;
            content: 'V';
            color: #0F0;
            font-style: normal;
            font-family: sans-serif;
        }

        em.incorrect:after {
            display: inline-block;
            content: 'X';
            color: #F00;
            font-style: normal;
            font-family: sans-serif;
        }

        html, body {
            margin: 0;
            padding: 0;
            border: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .main h1 {
            color: #000;
            text-align: center;
        }
    </style>
    <script type="text/javascript"> var pageTitle = "商品入库单"; var formChanged = false; var pageType = "Edit"; var createTime = "2014/2/15 19:58:54"; var id = "@Model.Id"; pageName = "PcPutinManageEdit"; </script>
    <script type="text/javascript">
        function SaveData() {
            var form = new mini.Form("#formMain"); // default form
            var o = form.getData();
            $.ajax({
                url: "/Pc/SavePcPutinManage",
                type: 'post',
                data: o,
                cache: false,
                dataType: "json",
                success: function (r) {
                    if (r.IsSuccess == true) {
                        closeWithNoValidate();
                    } else {
                        $("#Tooltip_Critical_PcPutinManage .content").first().text(r.Message);
                        $("#Tooltip_Critical_PcPutinManage").show("fast");
                        form.unmask();
                        $(document).scrollTop(0);
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    $("#Tooltip_Critical_PcPutinManage .content").first().text(jqXHR.responseText);
                    $("#Tooltip_Critical_PcPutinManage").show("fast");
                    form.unmask();
                    $(document).scrollTop(0);
                }
            });
        }
        function rowclick(e) {
            $.getJSON("/Pc/SearchPcPurchaseDetailList?PcNumber=" + e.record.Id, function (j) {
                $("#tr").tmpl(j).appendTo("#table1");
            })
        }
        function print() {
            $("#printArea").printArea();
        }
        $(function () {
            mini.parse();            var grid = mini.get("datagrid1");
            grid.load();

            $("#btnPrint").click(function () {
                $("#printArea").printArea();
            });
        });
    </script>
    <script id="tr" type="text/x-jquery-tmpl">
        {{each data}}
            <tr>
                <td>${GoodsCode}
                </td>
                <td>${GoodsBarCode}
                </td>
                <td>商品名称
                </td>
                <td>${Specification}
                </td>
                <td>${PackUnitCode}
                </td>
                <td>${StockQty}
                </td>
                <td>${PackQty}
                </td>
                <td>${PackCoef}
                </td>
                <td>${PutinQty}
                </td>
                <td>${PurchasePrice}
                </td>
                <td>${SalePrice}
                </td>
                <td>${PurchaseMoney}
                </td>
                <td>${NontaxPurchaseMoney}
                </td>
            </tr>
        {{/each}}
        <tr>
            <td colspan="17">总数：${total}
            </td>
        </tr>
    </script>
</head>
<body>
    <div class="container mini-fit">
        <div class="mini-splitter" style="width: 100%; height: 100%">
            <div size="350" showcollapsebutton="true" style="padding: 5px;">
                <div id="datagrid1" class="mini-datagrid" url="/Pc/SearchPcPurchaseManageList?IfExamine=1"
                    style="width: 100%; height: 100%;" idfield="id" allowresize="false" sizelist="[20,30,50,100]"
                    pagesize="20" multiselect="true" showfilterrow="false" onrowclick="rowclick">
                    <div property="columns">
                        <div type="indexcolumn" width="30">
                        </div>
                        <div type="checkcolumn" width="30">
                        </div>
                        <div field="Id" headeralign="center" align="center" width="150">
                            采购单号
                        </div>
                        <div field="SupName" headeralign="center" align="center" width="100">
                            供货商名称
                        </div>
                    </div>

                </div>
            </div>
            <div showcollapsebutton="true">
                <div id="printArea" class="main" style="width: 21cm; margin: 0 auto; font-size: 12px;">
                    <h1 style="text-align:center;color:#000; border-bottom:solid 1px #000; padding:10px;">商品验收入库单</h1>
                    <table style="width:100%;">
                        <tr>
                            <td>姓名：张三</td>
                            <td>姓名：张三</td>
                            <td>姓名：张三</td>
                        </tr>
                    </table>
                    <table id="table1" bordercolor="#000" style="border: solid 1px #000; border-collapse: collapse; width: 100%; margin: 0 auto;"
                        border="1">
                        <thead>
                            <tr>
                                <th>商品编码
                                </th>
                                <th>商品销售码
                                </th>
                                <th>商品名称
                                </th>
                                <th>规格
                                </th>
                                <th>单位
                                </th>
                                <th>单品数量
                                </th>
                                <th>整件数量
                                </th>
                                <th>系数
                                </th>
                                <th>验收数量
                                </th>
                                <th>含税进价
                                </th>
                                <th>销售价
                                </th>
                                <th>含税金额
                                </th>
                                <th>售价金额
                                </th>
                            </tr>
                        </thead>
                    </table>
                    <div class="footPanel">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="control-panel">
        <div class="control-button">
            <input type="button" class="myButton" id="btnFormSubmit" value="保存(Ctrl+S)" />
            <input type="reset" class="myGrayButton" id="btnFormReset" value="重置(Esc)" />
            <input type="button" class="myButton" id="btnPrint" onclick="print()" value="打印" />
            <input type="button" class="myRedButton" id="btnClosePage" value="关闭(Ctrl+Q)" />
        </div>
        <div class="botton-up">
        </div>
    </div>
</body>
</html>

