@model YiQiWorkFlow.Domain.Ms.MsCardArchives
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>卡信息编辑</title>
    <link type="text/css" rel="Stylesheet" href="/Styles/editPage.css" />
    <script type="text/javascript" src="/scripts/boot.js"></script>
    <script type="text/javascript" src="/Scripts/editPage.js"></script>
    <script type="text/javascript"> var pageTitle = "卡信息"; var formChanged = false; var pageType = "Edit"; var createTime = "2014/2/15 19:58:50"; var id = "@Model.Id"; pageName = "MsCardArchivesEdit"; </script>
    <script type="text/javascript">
        function SaveData() {
            var form = new mini.Form("#formMain"); // default form
            var o = form.getData(true);
            $.ajax({
                url: "/Ms/SaveMsCardArchives",
                type: 'post',
                data: o,
                cache: false,
                dataType: "json",
                success: function (r) {
                    if (r.IsSuccess == true) {
                        closeWithNoValidate();
                    } else {
                        $("#Tooltip_Critical_MsCardArchives .content").first().text(r.Message);
                        $("#Tooltip_Critical_MsCardArchives").show("fast");
                        form.unmask();
                        $(document).scrollTop(0);
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    $("#Tooltip_Critical_MsCardArchives .content").first().text(jqXHR.responseText);
                    $("#Tooltip_Critical_MsCardArchives").show("fast");
                    form.unmask();
                    $(document).scrollTop(0);
                }
            });
        }

        function onButtonEdit(e) {
            var btnEdit = this;
            mini.open({
                url: "/Common/MemberArchivesSelector",
                showMaxButton: false,
                title: "选择会员",
                width: 600,
                height: 400,
                ondestroy: function (action) {
                    if (action == "ok") {
                        var iframe = this.getIFrameEl();
                        var data = iframe.contentWindow.GetData();
                        data = mini.clone(data);
                        if (data) {
                            btnEdit.setValue(data.id);
                            btnEdit.setText(data.text);

                            var txtMsName = mini.get('#Control_MsName');
                            if (txtMsName) {
                                txtMsName.setValue(data.text);
                            }
                        }
                    }
                }
            });
        }

        function onCloseClick(e) {
            var obj = e.sender;
            obj.setText("");
            obj.setValue("");
        }

        function valuechanged() {
            var cardTypeCombobox = mini.get('#Control_CardCode');
            var cardTypeCode = cardTypeCombobox.getText();
            var cardNameText = mini.get('#Control_CardName');
            if (cardTypeCode) {
                cardNameText.setValue(cardTypeCode);
            } else {
                cardNameText.setText("");
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>卡信息编辑
        </h1>
        <div class="tooltip warning hidden" id="Tooltip_Warning_MsCardArchives">
            <img src="/images/Warning.png" alt="Warning" height="48" width="48" />
            <p class="content">
                此处填写关于卡信息编辑页面的警告信息
            </p>
            <div class="button-close">
                x
            </div>
            <div class="buttonGroup">
                <input type="button" class="myYellowButton buttonNoMoreShow" value="不再显示" />
                <input type="button" class="myYellowButton buttonClose" value="关闭" />
            </div>
        </div>
        <div class="tooltip info hidden" id="Tooltip_Info_MsCardArchives">
            <img src="/images/Info.png" alt="Warning" height="48" width="48" />
            <p class="content">
                此处填写关于卡信息编辑页面的提示信息
            </p>
            <div class="button-close">
                x
            </div>
            <div class="buttonGroup">
                <input type="button" class="myYellowButton buttonNoMoreShow" value="不再显示" />
                <input type="button" class="myYellowButton buttonClose" value="关闭" />
            </div>
        </div>
        <div class="tooltip help hidden" id="Tooltip_Help_MsCardArchives">
            <img src="/images/Help.png" alt="Warning" height="48" width="48" />
            <p class="content">
                此处填写关于卡信息编辑页面的帮助信息
            </p>
            <div class="button-close">
                x
            </div>
            <div class="buttonGroup">
                <input type="button" class="myYellowButton buttonNoMoreShow" value="不再显示" />
                <input type="button" class="myYellowButton buttonClose" value="关闭" />
            </div>
        </div>
        <div class="tooltip critical hidden" id="Tooltip_Critical_MsCardArchives">
            <img src="/images/critical.png" alt="Warning" height="48" width="48" />
            <p class="content">
                此处填写关于卡信息编辑页面的出错信息
            </p>
            <div class="button-close">
                x
            </div>
            <div class="buttonGroup">
                <input type="button" class="myYellowButton buttonNoMoreShow" value="不再显示" />
                <input type="button" class="myYellowButton buttonClose" value="关闭" />
            </div>
        </div>
        <form id="formMain" method="post" action="">
            <fieldset>
                <legend>基本信息</legend>
                <div class="ablock" style="display: none">
                    <label for="Control_CardNumber">卡号:</label>
                    <input id="Control_CardNumber" value="@Model.Id" name="Id" class="mini-hidden" />
                </div>

                <div class="ablock">
                    <label for="Control_SurfaceNumber">卡面明码:</label>
                    <input type="text" value="@Model.SurfaceNumber" class="mini-textbox" name="SurfaceNumber" id="Control_SurfaceNumber" vtype="maxLength:20" required="true" />
                </div>

                <div class="ablock">
                    <label for="Control_MsCode">会员编码:</label>
                    <input id="Control_MsCode" name="MsCode" class="mini-buttonedit" onbuttonclick="onButtonEdit" allowinput="false" required="true" value="@Model.MsCode" text="@Model.MsCode" />

                    <input id="control_hMsCode" value="@Model.MsCode" name="hMsCode" class="mini-hidden" />
                </div>

                <div class="ablock">
                    <label for="Control_CardCode">卡类型编码:</label>
                    <div id="Control_CardCode" name="CardCode" class="mini-combobox" style="width: 150px;" popupwidth="400" textfield="CardName" valuefield="Id"
                        url="/Ms/GetMsCardtypeManageList" showclose="true" oncloseclick="onCloseClick" onvaluechanged="valuechanged" emptytext="请选择..." required="true" value="@Model.CardCode">
                        <div property="columns">
                            <div header="卡类型编码" field="Id"></div>
                            <div header="卡类型名称" field="CardName"></div>
                        </div>
                    </div>
                </div>

                <div class="ablock">
                    <label for="Control_CardName">卡类型名称:</label>

                    <input type="text" value="@Model.CardName" class="mini-textbox" name="CardName" id="Control_CardName" vtype="maxLength:20" readonly="readonly" />
                </div>

                <div class="ablock">
                    <label for="Control_MsName">会员姓名:</label>
                    <input type="text" value="@Model.MsName" class="mini-textbox" name="MsName" id="Control_MsName" vtype="maxLength:20" />
                </div>

                <div class="ablock">
                    <label for="Control_CardState">卡状态:</label>
                    <input type="text" value="@Model.CardState" class="mini-combobox" name="CardState" id="Control_CardState" data="c_CardState" vtype="maxLength:2" required="true" />
                </div>

                <div class="ablock">
                    <label for="Control_CreateDate">制卡日期:</label>
                    <input type="text" id="Control_CreateDate" name="CreateDate" value="@Model.CreateDate" class="mini-datepicker" format="yyyy-MM-dd H:mm:ss" timeformat="H:mm:ss" showtime="true" showokbutton="true" showclearbutton="true" required="false" />
                </div>

                <div class="ablock">
                    <label for="Control_GrantDate">发卡日期:</label>
                    <input type="text" id="Control_GrantDate" name="GrantDate" value="@Model.GrantDate" class="mini-datepicker" format="yyyy-MM-dd H:mm:ss" timeformat="H:mm:ss" showtime="true" showokbutton="true" showclearbutton="true" required="false" />
                </div>

                <div class="ablock">
                    <label for="Control_EffectiveDate">生效日期:</label>
                    <input type="text" id="Control_EffectiveDate" name="EffectiveDate" value="@Model.EffectiveDate" class="mini-datepicker" format="yyyy-MM-dd H:mm:ss" timeformat="H:mm:ss" showtime="true" showokbutton="true" showclearbutton="true" required="false" />
                </div>

                <div class="ablock">
                    <label for="Control_PointsUsefulLifeDate">积分有效期:</label>
                    <input type="text" id="Control_PointsUsefulLifeDate" name="PointsUsefulLifeDate" value="@Model.PointsUsefulLifeDate" class="mini-datepicker" format="yyyy-MM-dd H:mm:ss" timeformat="H:mm:ss" showtime="true" showokbutton="true" showclearbutton="true" required="false" />
                </div>

                <div class="ablock">
                    <label for="Control_CardUsefulLifeDate">卡有效期:</label>
                    <input type="text" id="Control_CardUsefulLifeDate" name="CardUsefulLifeDate" value="@Model.CardUsefulLifeDate" class="mini-datepicker" format="yyyy-MM-dd H:mm:ss" timeformat="H:mm:ss" showtime="true" showokbutton="true" showclearbutton="true" required="false" />
                </div>

                <div class="ablock">
                    <label for="Control_TransactCharge">办卡费用:</label>
                    <input type="text" id="Control_TransactCharge" name="TransactCharge" value="@Model.TransactCharge" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_DepositMoney">押金金额:</label>
                    <input type="text" id="Control_DepositMoney" name="DepositMoney" value="@Model.DepositMoney" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_TotalMoney">累计消费金额:</label>
                    <input type="text" id="Control_TotalMoney" name="TotalMoney" value="@Model.TotalMoney" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_TotalExpendTimes">累计消费次数:</label>
                    <input type="text" id="Control_TotalExpendTimes" name="TotalExpendTimes" value="@Model.TotalExpendTimes" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_LastExpendMoney">上次消费金额:</label>
                    <input type="text" id="Control_LastExpendMoney" name="LastExpendMoney" value="@Model.LastExpendMoney" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_TotalPoints">累计积分:</label>
                    <input type="text" id="Control_TotalPoints" name="TotalPoints" value="@Model.TotalPoints" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_ExchangePoints">兑换积分:</label>
                    <input type="text" id="Control_ExchangePoints" name="ExchangePoints" value="@Model.ExchangePoints" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_CurrentPoints">当前积分:</label>
                    <input type="text" id="Control_CurrentPoints" name="CurrentPoints" value="@Model.CurrentPoints" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_ClearPoints">清零积分:</label>
                    <input type="text" id="Control_ClearPoints" name="ClearPoints" value="@Model.ClearPoints" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_PrepaidPassword">储值密码:</label>
                    <input type="text" value="@Model.PrepaidPassword" class="mini-password" name="PrepaidPassword" id="Control_PrepaidPassword" vtype="maxLength:50" />
                </div>

                <div class="ablock">
                    <label for="Control_TotalPrepaid">累计储值金额:</label>
                    <input type="text" id="Control_TotalPrepaid" name="TotalPrepaid" value="@Model.TotalPrepaid" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_CurrentPrepaid">当前储值金额:</label>
                    <input type="text" id="Control_CurrentPrepaid" name="CurrentPrepaid" value="@Model.CurrentPrepaid" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_CurrentPrepaidEncrypt">当前金额:</label>
                    <input type="text" value="@Model.CurrentPrepaidEncrypt" class="mini-textbox" name="CurrentPrepaidEncrypt" id="Control_CurrentPrepaidEncrypt" vtype="maxLength:50" />
                </div>

                <div class="ablock">
                    <label for="Control_UsePrepaid">使用金额:</label>
                    <input type="text" id="Control_UsePrepaid" name="UsePrepaid" value="@Model.UsePrepaid" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_LimitTimes">限制次数:</label>
                    <input type="text" id="Control_LimitTimes" name="LimitTimes" value="@Model.LimitTimes" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_SaleTimes">消费次数:</label>
                    <input type="text" id="Control_SaleTimes" name="SaleTimes" value="@Model.SaleTimes" class="mini-spinner" minvalue="0" maxvalue="1000" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_Operator">操作员:</label>
                    <input type="text" value="@Model.Operator" class="mini-textbox" name="Operator" id="Control_Operator" vtype="maxLength:20" />
                </div>

                <div class="ablock">
                    <label for="Control_OperatorDate">操作时间:</label>
                    <input type="text" id="Control_OperatorDate" name="OperatorDate" value="@Model.OperatorDate" class="mini-datepicker" format="yyyy-MM-dd H:mm:ss" timeformat="H:mm:ss" showtime="true" showokbutton="true" showclearbutton="true" required="false" />
                </div>


            </fieldset>
            <div class="clear">
            </div>
            <div class="control-panel">
                <div class="control-button">
                    <input type="button" class="myButton" id="btnFormSubmit" value="保存(Ctrl+S)" />
                    <input type="reset" class="myGrayButton" id="btnFormReset" value="重置(Esc)" />
                    <input type="button" class="myRedButton" id="btnClosePage" value="关闭(Ctrl+Q)" />
                </div>
                <div class="botton-up">
                </div>
            </div>
        </form>
    </div>
</body>
</html>
