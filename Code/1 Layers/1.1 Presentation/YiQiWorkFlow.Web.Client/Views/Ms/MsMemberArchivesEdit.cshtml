@model YiQiWorkFlow.Domain.Ms.MsMemberArchives
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>会员信息管理</title>
    <link type="text/css" rel="Stylesheet" href="/Styles/editPage.css" />
    <script type="text/javascript" src="/scripts/boot.js"></script>
    <script type="text/javascript" src="/Scripts/editPage.js"></script>
    <script type="text/javascript"> var pageTitle = "会员信息管理"; var formChanged = false; var pageType = "Edit"; var createTime = "2014/2/15 19:58:51"; var id = "@Model.Id"; pageName = "MsMemberArchivesEdit"; </script>
    <script type="text/javascript">
        function SaveData() {
            var form = new mini.Form("#formMain"); // default form
            var o = form.getData(true);
            $.ajax({
                url: "/Ms/SaveMsMemberArchives",
                type: 'post',
                data: o,
                cache: false,
                dataType: "json",
                success: function (r) {
                    if (r.IsSuccess == true) {
                        location.href = "/Ms/MsMemberArchivesEdit";
                    } else {
                        $("#Tooltip_Critical_MsMemberArchives .content").first().text(r.Message);
                        $("#Tooltip_Critical_MsMemberArchives").show("fast");
                        form.unmask();
                        $(document).scrollTop(0);
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    $("#Tooltip_Critical_MsMemberArchives .content").first().text(jqXHR.responseText);
                    $("#Tooltip_Critical_MsMemberArchives").show("fast");
                    form.unmask();
                    $(document).scrollTop(0);
                }
            });
        }

        $(function () {
            var msName = mini.get('#Control_MsName').getValue();
            var msCode = mini.get('#Control_MsCode').getValue();
            if (msName) {
                var url = "/Ms/GetMsCardArchivesList?MsCode=" + msCode;
                var grid = mini.get("#datagrid1");
                grid.load(url);
            }
        });

        function Add() {
            location.href = "/Ms/MsMemberArchivesEdit";
        }

        function Search() {
            location.href = "/Ms/MsMemberArchivesList";
        }
    </script>
</head>
<body>
    <div class="container">
        <div id="toolbar1" class="mini-toolbar" style="padding: 2px;">
            <table style="width: 100%;">
                <tr>
                    <td>
                        <a id="btnAdd" iconcls="icon-add" class="mini-button" plain="true" tooltip="增加">增加</a>
                        <a id="btnFormSubmit" iconcls="icon-save" class="mini-button" plain="true" tooltip="保存(Ctrl+S)">保存</a>
                        <a id="btnSearch" iconcls="icon-search" class="mini-button" plain="true" tooltip="查询">查询</a>
                        <a id="btnPrint" iconcls="icon-print" class="mini-button" plain="true" tooltip="打印">打印</a>
                        <a id="btnGoBack" iconcls="icon-undo" class="mini-button" plain="true" tooltip="返回(Ctrl+Q)">返回</a>
                    </td>
                </tr>
            </table>
        </div>
        <!--<h1>会员信息编辑
        </h1>-->
        <div class="tooltip warning hidden" id="Tooltip_Warning_MsMemberArchives">
            <img src="/images/Warning.png" alt="Warning" height="48" width="48" />
            <p class="content">
                此处填写关于会员信息编辑页面的警告信息
            </p>
            <div class="button-close">
                x
            </div>
            <div class="buttonGroup">
                <input type="button" class="myYellowButton buttonNoMoreShow" value="不再显示" />
                <input type="button" class="myYellowButton buttonClose" value="关闭" />
            </div>
        </div>
        <div class="tooltip info hidden" id="Tooltip_Info_MsMemberArchives">
            <img src="/images/Info.png" alt="Warning" height="48" width="48" />
            <p class="content">
                此处填写关于会员信息编辑页面的提示信息
            </p>
            <div class="button-close">
                x
            </div>
            <div class="buttonGroup">
                <input type="button" class="myYellowButton buttonNoMoreShow" value="不再显示" />
                <input type="button" class="myYellowButton buttonClose" value="关闭" />
            </div>
        </div>
        <div class="tooltip help hidden" id="Tooltip_Help_MsMemberArchives">
            <img src="/images/Help.png" alt="Warning" height="48" width="48" />
            <p class="content">
                此处填写关于会员信息编辑页面的帮助信息
            </p>
            <div class="button-close">
                x
            </div>
            <div class="buttonGroup">
                <input type="button" class="myYellowButton buttonNoMoreShow" value="不再显示" />
                <input type="button" class="myYellowButton buttonClose" value="关闭" />
            </div>
        </div>
        <div class="tooltip critical hidden" id="Tooltip_Critical_MsMemberArchives">
            <img src="/images/critical.png" alt="Warning" height="48" width="48" />
            <p class="content">
                此处填写关于会员信息编辑页面的出错信息
            </p>
            <div class="button-close">
                x
            </div>
            <div class="buttonGroup">
                <input type="button" class="myYellowButton buttonNoMoreShow" value="不再显示" />
                <input type="button" class="myYellowButton buttonClose" value="关闭" />
            </div>
        </div>
        <form id="formMain" method="post" action="">
            <fieldset>
                <legend>基本信息</legend>
                <!--<div class="ablock">
                    <label for="Control_CardNumber">卡号:</label>
                    <input type="text" value="@Model.CardNumber" class="mini-textbox" name="CardNumber" id="Control_CardNumber" vtype="maxLength:20" allowinput="false" />
                </div>-->

                <div class="ablock" style="display: none">
                    <label for="Control_MsCode">会员编码:</label>
                    <input id="Control_MsCode" value="@Model.Id" name="Id" class="mini-hidden" />
                </div>

                <div class="ablock">
                    <label for="Control_MsName">会员姓名:</label>
                    <input type="text" value="@Model.MsName" class="mini-textbox" name="MsName" id="Control_MsName" vtype="maxLength:20" required="true" />
                </div>

                <div class="ablock">
                    <label for="Control_Birthday">出生日期:</label>
                    <input type="text" id="Control_Birthday" name="Birthday" value="@Model.Birthday" class="mini-datepicker" format="yyyy-MM-dd H:mm:ss" timeformat="H:mm:ss" showtime="true" showokbutton="true" showclearbutton="true" required="false" />
                </div>

                <div class="ablock">
                    <label for="Control_Sex">性别:</label>
                    <input type="text" value="@Model.Sex" class="mini-combobox" name="Sex" id="Control_Sex" data="c_Sex" vtype="maxLength:20" />
                </div>

                <div class="ablock">
                    <label for="Control_PoliticsCode">政治面貌:</label>
                    <!--<input type="text" value="@Model.PoliticsCode" class="mini-combobox" name="PoliticsCode" id="Control_PoliticsCode" data="c_PoliticsCode" vtype="maxLength:20" />-->

                    <input class="mini-combobox" style="width: 150px;" name="PoliticsCode" id="Control_PoliticsCode" textfield="text" valuefield="text"
                        url="/Em/GetEmPaPoliticsList" value="cn" shownullitem="true" allowinput="true" valueFromSelect="true" />

                </div>

                <div class="ablock">
                    <label for="Control_NationCode">民族:</label>
                    <!--<input type="text" value="@Model.NationCode" class="mini-combobox" name="NationCode" id="Control_NationCode" data="c_NationCode" vtype="maxLength:20" />-->
                    <input class="mini-combobox" style="width: 150px;" name="NationCode" id="Control_NationCode" textfield="text" valuefield="text"
                        url="/Em/GetEmPaNationList" value="cn" shownullitem="true" allowinput="true" valueFromSelect="true" />
                </div>

                <div class="ablock">
                    <label for="Control_EducationCode">学历:</label>
                    <!--<input type="text" value="@Model.EducationCode" class="mini-combobox" name="EducationCode" id="Control_EducationCode" data="c_EducationCode" vtype="maxLength:20" />-->
                    <input class="mini-combobox" style="width: 150px;" name="EducationCode" id="Control_EducationCode" textfield="text" valuefield="text"
                        url="/Em/GetEmPaEducationList" value="cn" shownullitem="true" allowinput="true" valueFromSelect="true" />
                </div>

                <div class="ablock">
                    <label for="Control_ProfessionalTitleCode">职称:</label>
                   <!-- <input type="text" value="@Model.ProfessionalTitleCode" class="mini-combobox" name="ProfessionalTitleCode" id="Control_ProfessionalTitleCode" data="c_ProfessionalTitleCode" vtype="maxLength:20" />-->
                    <input class="mini-combobox" style="width: 150px;" name="ProfessionalTitleCode" id="Control_ProfessionalTitleCode" textfield="text" valuefield="text"
                        url="/Em/GetEmPaProfessionalTitleList" value="cn" shownullitem="true" allowinput="true" valueFromSelect="true" />
                </div>

                <div class="ablock">
                    <label for="Control_IfMarried">婚否:</label>
                    <div id="Control_IfMarried" name="IfMarried" value="1" class="mini-checkbox" truevalue="1" falsevalue="0" checked="true" readonly="false" text="婚否"></div>
                </div>

                <div class="ablock">
                    <label for="Control_NativePlace">籍贯:</label>
                    <input type="text" value="@Model.NativePlace" class="mini-textbox" name="NativePlace" id="Control_NativePlace" vtype="maxLength:40" />
                </div>

                <div class="ablock">
                    <label for="Control_Idcard">身份证号:</label>
                    <!--<input type="text" value="@Model.Idcard" class="mini-textbox" name="Idcard" id="Control_Idcard" onvalidation="onIDCardsValidation" vtype="maxLength:20" />-->
                    <input type="text" value="@Model.Idcard" class="mini-textbox" name="Idcard" id="Control_Idcard" vtype="maxLength:18" />
                </div>

                <div class="ablock">
                    <label for="Control_FamilyPhone">家庭电话:</label>
                    <input type="text" value="@Model.FamilyPhone" class="mini-textbox" name="FamilyPhone" id="Control_FamilyPhone" vtype="maxLength:20" />
                </div>

                <div class="ablock">
                    <label for="Control_Handset">手机:</label>
                    <input type="text" value="@Model.Handset" class="mini-textbox" name="Handset" id="Control_Handset" vtype="maxLength:20" />
                </div>

                <div class="ablock">
                    <label for="Control_eMail">E-mail:</label>
                    <input type="text" value="@Model.eMail" class="mini-textbox" name="eMail" id="Control_eMail" vtype="maxLength:30" />
                </div>

                <div class="ablock">
                    <label for="Control_FamilyAddress">家庭住址:</label>
                    <input type="text" value="@Model.FamilyAddress" class="mini-textbox" name="FamilyAddress" id="Control_FamilyAddress" vtype="maxLength:40" />
                </div>

                <div class="ablock">
                    <label for="Control_Postalcode">邮政编码:</label>
                    <input type="text" value="@Model.Postalcode" class="mini-textbox" name="Postalcode" id="Control_Postalcode" vtype="rangeChar:6,6" />
                </div>

                <div class="ablock">
                    <label for="Control_Stature">身高:</label>
                    <input type="text" id="Control_Stature" name="Stature" value="@Model.Stature" class="mini-spinner" minvalue="-999999999" maxvalue="999999999" decimalplaces="2" />
                </div>

                <div class="ablock">
                    <label for="Control_Width">体重:</label>
                    <input type="text" id="Control_Width" name="Width" value="@Model.Width" class="mini-spinner" minvalue="-999999999" maxvalue="999999999" decimalplaces="2" />
                </div>

            </fieldset>

            <div class="clear">
            </div>
            <!--<div class="control-panel">
                <div class="control-button">
                    <input type="button" class="myButton" id="btnFormSubmit" value="保存(Ctrl+S)" />
                    <input type="reset" class="myGrayButton" id="btnFormReset" value="重置(Esc)" />
                    <input type="button" class="myRedButton" id="btnClosePage" value="关闭(Ctrl+Q)" />
                </div>
                <div class="botton-up">
                </div>
            </div>-->
        </form>

        <div id="datagrid1" class="mini-datagrid" url="/Ms/GetMsCardArchivesList?MsCode=@Model.Id"
            style="width: 100%; height: 300px;" idfield="id" allowresize="false" showpager="false" multiselect="true" showfilterrow="true">
            <div property="columns">
                <div type="indexcolumn" width="30">
                </div>
                <div field="Id" headeralign="center" align="center" width="120">
                    卡号
                    <input id="filter_Id" name="Id" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="SurfaceNumber" headeralign="center" align="center" width="120">
                    卡面明码
                    <input id="filter_SurfaceNumber" name="SurfaceNumber" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="MsCode" headeralign="center" align="center" width="120">
                    会员编码
                    <input id="filter_MsCode" name="MsCode" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="CardCode" headeralign="center" align="center" width="80">
                    卡类型编码
                    <input id="filter_CardCode" name="CardCode" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="CardName" headeralign="center" align="center" width="80">
                    卡类型名称
                    <input id="filter_CardName" name="CardName" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="MsName" headeralign="center" align="center" width="80">
                    会员姓名
                    <input id="filter_MsName" name="MsName" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="CardState" headeralign="center" align="center" width="80" renderer="onCardStateRender">
                    卡状态
                    <input id="filter_CardState" name="CardState" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="CreateDate" headeralign="center" align="center" width="80" dateformat="yyyy-MM-dd">
                    制卡日期
                    <input id="filter_CreateDate" name="CreateDate" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="GrantDate" headeralign="center" align="center" width="80" dateformat="yyyy-MM-dd">
                    发卡日期
                    <input id="filter_GrantDate" name="GrantDate" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="EffectiveDate" headeralign="center" align="center" width="80" dateformat="yyyy-MM-dd">
                    生效日期
                    <input id="filter_EffectiveDate" name="EffectiveDate" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="PointsUsefulLifeDate" headeralign="center" align="center" width="80" dateformat="yyyy-MM-dd">
                    积分有效期
                    <input id="filter_PointsUsefulLifeDate" name="PointsUsefulLifeDate" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="CardUsefulLifeDate" headeralign="center" align="center" width="80" dateformat="yyyy-MM-dd">
                    卡有效期
                    <input id="filter_CardUsefulLifeDate" name="CardUsefulLifeDate" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="TransactCharge" headeralign="center" align="center" width="80">
                    办卡费用
                    <input id="filter_TransactCharge" name="TransactCharge" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="DepositMoney" headeralign="center" align="center" width="80">
                    押金金额
                    <input id="filter_DepositMoney" name="DepositMoney" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="TotalMoney" headeralign="center" align="center" width="80">
                    累计消费金额
                    <input id="filter_TotalMoney" name="TotalMoney" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="TotalExpendTimes" headeralign="center" align="center" width="80">
                    累计消费次数
                    <input id="filter_TotalExpendTimes" name="TotalExpendTimes" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="LastExpendMoney" headeralign="center" align="center" width="80">
                    上次消费金额
                    <input id="filter_LastExpendMoney" name="LastExpendMoney" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="TotalPoints" headeralign="center" align="center" width="80">
                    累计积分
                    <input id="filter_TotalPoints" name="TotalPoints" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="ExchangePoints" headeralign="center" align="center" width="80">
                    兑换积分
                    <input id="filter_ExchangePoints" name="ExchangePoints" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="CurrentPoints" headeralign="center" align="center" width="80">
                    当前积分
                    <input id="filter_CurrentPoints" name="CurrentPoints" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="ClearPoints" headeralign="center" align="center" width="80">
                    清零积分
                    <input id="filter_ClearPoints" name="ClearPoints" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="PrepaidPassword" headeralign="center" align="center" width="80">
                    储值密码
                    <input id="filter_PrepaidPassword" name="PrepaidPassword" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="TotalPrepaid" headeralign="center" align="center" width="80">
                    累计储值金额
                    <input id="filter_TotalPrepaid" name="TotalPrepaid" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="CurrentPrepaid" headeralign="center" align="center" width="80">
                    当前储值金额
                    <input id="filter_CurrentPrepaid" name="CurrentPrepaid" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="CurrentPrepaidEncrypt" headeralign="center" align="center" width="80">
                    当前金额
                    <input id="filter_CurrentPrepaidEncrypt" name="CurrentPrepaidEncrypt" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="UsePrepaid" headeralign="center" align="center" width="80">
                    使用金额
                    <input id="filter_UsePrepaid" name="UsePrepaid" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="LimitTimes" headeralign="center" align="center" width="80">
                    限制次数
                    <input id="filter_LimitTimes" name="LimitTimes" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="SaleTimes" headeralign="center" align="center" width="80">
                    消费次数
                    <input id="filter_SaleTimes" name="SaleTimes" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <!--<div field="IfExamine" headeralign="center" align="center" width="80" renderer="onExamineRender">
                    是否审核
                    <input id="filter_IfExamine" name="IfExamine" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>-->
                <div field="Operator" headeralign="center" align="center" width="80">
                    操作员
                    <input id="filter_Operator" name="Operator" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <div field="OperatorDate" headeralign="center" align="center" width="80" dateformat="yyyy-MM-dd">
                    操作时间
                    <input id="filter_OperatorDate" name="OperatorDate" property="filter" class="mini-textbox" onvaluechanged="search" style="width: 100%;" />
                </div>
                <!--<div field="IfExamine" headeralign="center" align="center" width="30" renderer="onExamRender">审核</div>-->

            </div>
        </div>
    </div>
</body>
</html>
